# Chatbot v2 24h Baseline (2026-02-18)

Generated at: 2026-02-18 (Asia/Hong_Kong)
Window: `now() - interval '24 hours'`
Data source: `chat_request_logs`

## SQL A) 24h latency by gear (fixed B/G1/G2/G3)

```sql
with gears as (
  select unnest(array['B','G1','G2','G3']) as model_gear
), latency as (
  select
    model_gear,
    count(*) as n,
    round(percentile_cont(0.5) within group (order by duration_ms)::numeric, 2) as p50_ms,
    round(percentile_cont(0.95) within group (order by duration_ms)::numeric, 2) as p95_ms
  from chat_request_logs
  where created_at >= now() - interval '24 hours'
    and duration_ms is not null
  group by model_gear
)
select
  g.model_gear,
  coalesce(l.n, 0) as n,
  l.p50_ms,
  l.p95_ms
from gears g
left join latency l on l.model_gear = g.model_gear
order by case g.model_gear when 'B' then 1 when 'G1' then 2 when 'G2' then 3 else 4 end;
```

| model_gear | n | p50_ms | p95_ms |
|---|---:|---:|---:|
| B | 36 | 9194.00 | 14917.75 |
| G1 | 36 | 17508.00 | 36117.75 |
| G2 | 1 | 18085.00 | 18085.00 |
| G3 | 0 | null | null |

## SQL B) 24h token by gear (fixed B/G1/G2/G3)

```sql
with gears as (
  select unnest(array['B','G1','G2','G3']) as model_gear
), tokens as (
  select
    model_gear,
    count(*) as n,
    round(percentile_cont(0.5) within group (order by prompt_tokens)::numeric, 2) as prompt_p50,
    round(percentile_cont(0.95) within group (order by prompt_tokens)::numeric, 2) as prompt_p95,
    round(percentile_cont(0.5) within group (order by completion_tokens)::numeric, 2) as completion_p50,
    round(percentile_cont(0.95) within group (order by completion_tokens)::numeric, 2) as completion_p95
  from chat_request_logs
  where created_at >= now() - interval '24 hours'
    and prompt_tokens is not null
    and completion_tokens is not null
  group by model_gear
)
select
  g.model_gear,
  coalesce(t.n, 0) as n,
  t.prompt_p50,
  t.prompt_p95,
  t.completion_p50,
  t.completion_p95
from gears g
left join tokens t on t.model_gear = g.model_gear
order by case g.model_gear when 'B' then 1 when 'G1' then 2 when 'G2' then 3 else 4 end;
```

| model_gear | n | prompt_p50 | prompt_p95 | completion_p50 | completion_p95 |
|---|---:|---:|---:|---:|---:|
| B | 36 | 6260.50 | 7917.25 | 107.50 | 232.50 |
| G1 | 36 | 14620.50 | 18508.50 | 183.00 | 678.50 |
| G2 | 1 | 14328.00 | 14328.00 | 361.00 | 361.00 |
| G3 | 0 | null | null | null | null |

## Notes

- `G3` currently has no sample in this 24h window (`n = 0`).
- This file is the fixed baseline reference for Sprint 0-3 acceptance comparisons.
